{"componentChunkName":"component---src-templates-blog-js","path":"/2021/11/02/github-actions-more-tips/","result":{"data":{"blog":{"id":"19e81289-d4a2-5698-b297-123c87a5ce61","html":"<h2 id=\"workflow-的重用\" style=\"position:relative;\">workflow 的重用<a href=\"#workflow-%E7%9A%84%E9%87%8D%E7%94%A8\" aria-label=\"workflow 的重用 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p>分两部分，直接调用和模板。</p>\n<h3 id=\"直接调用\" style=\"position:relative;\">直接调用<a href=\"#%E7%9B%B4%E6%8E%A5%E8%B0%83%E7%94%A8\" aria-label=\"直接调用 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><a href=\"https://docs.github.com/en/actions/learn-github-actions/reusing-workflows\">https://docs.github.com/en/actions/learn-github-actions/reusing-workflows</a></p>\n<p>重点如下：</p>\n<ol>\n<li>允许被其他调用的 workflow 必须明确标注可触发事件 workflow_call</li>\n<li>不能套娃，这个 workflow 不能再掉用其他 workflow</li>\n<li>对调用有一定限制，具体看文档</li>\n</ol>\n<p>使用场景我觉得是两个：</p>\n<ol>\n<li>多仓库协同的部署，比如 a 必须依赖 b，那么 a 跑完就跑 b</li>\n<li>有些 workflow 每个地方都用，可以重用，不过感觉这部分更适合模板？</li>\n</ol>\n<h3 id=\"模板\" style=\"position:relative;\">模板<a href=\"#%E6%A8%A1%E6%9D%BF\" aria-label=\"模板 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><a href=\"https://docs.github.com/en/actions/learn-github-actions/creating-workflow-templates\">https://docs.github.com/en/actions/learn-github-actions/creating-workflow-templates</a></p>\n<p>只有 org 下能用，必须放到 .github 这个仓库里。放进来的 workflow 在其他仓库创建 workflow 的时候会出现，方便复制。</p>\n<h2 id=\"github-action-控制日志和关键信息展示\" style=\"position:relative;\">github action 控制日志和关键信息展示<a href=\"#github-action-%E6%8E%A7%E5%88%B6%E6%97%A5%E5%BF%97%E5%92%8C%E5%85%B3%E9%94%AE%E4%BF%A1%E6%81%AF%E5%B1%95%E7%A4%BA\" aria-label=\"github action 控制日志和关键信息展示 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>\n<p><a href=\"https://docs.github.com/en/actions/learn-github-actions/workflow-commands-for-github-actions\">https://docs.github.com/en/actions/learn-github-actions/workflow-commands-for-github-actions</a></p>\n<h3 id=\"分组日志\" style=\"position:relative;\">分组日志<a href=\"#%E5%88%86%E7%BB%84%E6%97%A5%E5%BF%97\" aria-label=\"分组日志 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><a href=\"https://docs.github.com/en/actions/learn-github-actions/workflow-commands-for-github-actions#grouping-log-lines\">https://docs.github.com/en/actions/learn-github-actions/workflow-commands-for-github-actions#grouping-log-lines</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 701px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/64ccfd99e350e4e0e520e8c5df9f8d49/49217/2021-11-02-00-17-16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJ0lEQVQY033QyU7DMBQF0PwMTWhjZ7Bdx3Y8ZLCblqRSSkQpUFEEEnwJGzZ8MkojVbBBOou3uFdXet48XgKcR0uJmAmxCBEPkQiRAOMtIMn/4YUpk257d3z9/Pre9IfD6b0/nPbHt4eXj/7+mZqGFeusWGdm0vzmzWMaU0XyStsuZYbKeqQsVRaLchoHeNwBJI+WKqb6wgsA8kHqAzRbJBERRBQREZhpiBhimhtLhKGywkxzXaeZnIXJOT8al5PMIF4iXrp22A6Prhv6/RNVlhfr+manbCfrVpQb5TqqXEx1kpnJVNYpL5AomVm59ta1u2Y7aNeRvAJYQCLP75GQyJiqJNMXXgCxD1AA8XVErhYp5kYUq0xW2m6Yrn2QBhAHEAVjBvngjx/nvmDQOnF0iQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2021 11 02 00 17 16\"\n        title=\"2021 11 02 00 17 16\"\n        src=\"/static/64ccfd99e350e4e0e520e8c5df9f8d49/49217/2021-11-02-00-17-16.png\"\n        srcset=\"/static/64ccfd99e350e4e0e520e8c5df9f8d49/772e8/2021-11-02-00-17-16.png 200w,\n/static/64ccfd99e350e4e0e520e8c5df9f8d49/e17e5/2021-11-02-00-17-16.png 400w,\n/static/64ccfd99e350e4e0e520e8c5df9f8d49/49217/2021-11-02-00-17-16.png 701w\"\n        sizes=\"(max-width: 701px) 100vw, 701px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"重点展示\" style=\"position:relative;\">重点展示<a href=\"#%E9%87%8D%E7%82%B9%E5%B1%95%E7%A4%BA\" aria-label=\"重点展示 permalink\" class=\"custom-class after\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 747px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7f38842d13c0caae40de4ffc4c7fb97e/d54e4/2021-11-02-00-17-49.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVQ4y61Ua4+jMAzk///C2z54ttq9QgghgZAHzMkGuu3uVXsfLpI1wXbG48QicT5ASIWu1xCyQ9N2aLuefYT0TfvVr+4xuWEtJMw4YZw8fIhIfAjozYBhtIyq1zDDyHs2vSIV1JuP0IwWqjeQnUKIM+K8IMSI5P39A7/eDiirCnle4HxOcTiekGY5srzA6XTG2+GIoiiRphnK6oIsy3E8ndb8NMPleoUxBrSSVkpOpmB1uaIoK+RFyQfJiLgoS3SdgiFlxmAYR5hhgNYaw0Bd9YxMSAmy6+C9Z8c8z1iWhZMIaW3w46L8hKr12tyJduu1hrUTYoz8TfFPWzabH3DeCIcRo51WdQ+EpLppBNymfFfwkyX0YnZy3NZemQK3ugHdbwgBznkmZiXLpm75Ytu5xE7U1owFuCfud0gP0bYSom3RCMFjsbwi3BXSzN1qwSoe29oJlVL3F/znlmmo75W36nSH1HbdNPj4feORecr5i62E2qCV3TcF1GbdCH4Y78O3KXipMM4zQoj8KI8Bui/yE3Kxly0/z2IihMClqrDMEf9jJeMU0CgLaTyEdmiNx005SOPWb+3Q9I59hEJ/Yt07DJZGKsC6sP5trItM1g0rIe1r5Z4K8GH1XGAn/kr4B7Vd3EY511dFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2021 11 02 00 17 49\"\n        title=\"2021 11 02 00 17 49\"\n        src=\"/static/7f38842d13c0caae40de4ffc4c7fb97e/d54e4/2021-11-02-00-17-49.png\"\n        srcset=\"/static/7f38842d13c0caae40de4ffc4c7fb97e/772e8/2021-11-02-00-17-49.png 200w,\n/static/7f38842d13c0caae40de4ffc4c7fb97e/e17e5/2021-11-02-00-17-49.png 400w,\n/static/7f38842d13c0caae40de4ffc4c7fb97e/d54e4/2021-11-02-00-17-49.png 747w\"\n        sizes=\"(max-width: 747px) 100vw, 747px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>这个东西非常适合把构建过程中比较重要的东西展示出来，比如我就用它来展示构建生成的镜像的 tag：</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 388px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/367cfa46f8e39de12051addbabeb2404/96c67/2021-11-02-00-18-31.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 106.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAABw0lEQVQ4y51Ta0/bQBD0//9HfG+F1AqSAAFaSPNwQ0z8TGr7Xns31W3iiBACtk8a3Z69tzu7sxdoQ5DagCwYxjposhBS90LgA8Zpgek8xGS6wGyxRLiMUAnVCwFZh8ksxPfLn7j8cYXB6A5/ZiFqqXshUNqg2FZI8g2iOIPUBE2OszVOnRj6/nlDKMNofrRh0/i99WeGZa1QComylig7sHkf7E1ACTIOxlhW2LOWSn8MbaD8ZOyrOWEolIbRDheLbxiHv/D78QllVeHcKjZbrOMEVV0f9fcQ0GeqhcZrmSL/t0VRbJiJIQtjCIZot+9tIRWqWqCW6rMeSihFR8Kc7eVBkE9E2TmqDgqf9+GSvcp9X8bJHPqnVzMrtdsbW6p+b9laC+fciZr+G5EF2W4IrHMQQiDNMkYUvSJJUkipDoG7IPCX1usYw9Etbm7HGAxHGN8/8Pg0AbusgKmSRV5sGB+tJnsbxtxDIkLTS601tDZ8NsYcMWzDlkvO8gLLVYS78T0Gwxsu/ZpLf8TT84Qdm4RfMvQlNxfiJEW4fMEqWmO2CPGyijAP/2IynSPN8lYsAx4NshzQK26t2+1sWz6T3f9vgf/D+mRqG2FhCAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2021 11 02 00 18 31\"\n        title=\"2021 11 02 00 18 31\"\n        src=\"/static/367cfa46f8e39de12051addbabeb2404/96c67/2021-11-02-00-18-31.png\"\n        srcset=\"/static/367cfa46f8e39de12051addbabeb2404/772e8/2021-11-02-00-18-31.png 200w,\n/static/367cfa46f8e39de12051addbabeb2404/96c67/2021-11-02-00-18-31.png 388w\"\n        sizes=\"(max-width: 388px) 100vw, 388px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#workflow-%E7%9A%84%E9%87%8D%E7%94%A8\">workflow 的重用</a></p>\n<ul>\n<li><a href=\"#%E7%9B%B4%E6%8E%A5%E8%B0%83%E7%94%A8\">直接调用</a></li>\n<li><a href=\"#%E6%A8%A1%E6%9D%BF\">模板</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#github-action-%E6%8E%A7%E5%88%B6%E6%97%A5%E5%BF%97%E5%92%8C%E5%85%B3%E9%94%AE%E4%BF%A1%E6%81%AF%E5%B1%95%E7%A4%BA\">github action 控制日志和关键信息展示</a></p>\n<ul>\n<li><a href=\"#%E5%88%86%E7%BB%84%E6%97%A5%E5%BF%97\">分组日志</a></li>\n<li><a href=\"#%E9%87%8D%E7%82%B9%E5%B1%95%E7%A4%BA\">重点展示</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"Github Actions tips 更新","date":"November 01, 2021"},"excerpt":"workflow 的重用 分两部分，直接调用和模板。 直接调用 https://docs.gith…"}},"pageContext":{"id":"19e81289-d4a2-5698-b297-123c87a5ce61"}},"staticQueryHashes":["4202924991"]}